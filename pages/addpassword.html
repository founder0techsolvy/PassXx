<!DOCTYPE html>
<html lang="en">
    <head>
        <link rel="icon" href="../password-manager.png" type="image/png" />
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Password Form Component</title>
        <link rel="stylesheet" href="../stylesheets/addpassword.css" />
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
        />
        <style>
            #add-pass-success {
                display: none;
            }

            #main-container{
                display: flex;
                width: 100%;
                justify-content: center;
                align-items: center;
                gap: 150px;
            }

            #generate {
                font-family: 'Roboto', sans-serif;
                padding: 20px;
                background-color: black;
                border-radius: 10px;
                box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
                max-width: 400px;
                margin: auto;
            }
            
            
            /* Input Box */
            .input-box {
                display: flex;
                align-items: center;
                background-color: #333;
                border: 1px solid #444;
                border-radius: 5px;
                padding: 10px;
                margin-bottom: 20px;
            }
            
            .input-box input[type="text"] {
                background-color: #333;
                color: #f1f1f1;
                border: none;
                outline: none;
                flex-grow: 1;
                padding: 5px;
                margin-right: 10px;
            }
            
            .input-box .material-symbols-outlined {
                color: #3b82f6; /* Tailwind CSS blue-500 */
                cursor: pointer;
            }
            
            /* Password Indicator */
            .pass-indicator {
                height: 5px;
                background-color: #444;
                border-radius: 5px;
                margin-bottom: 20px;
            }
            
            /* Password Length */
            .pass-length {
                margin-bottom: 20px;
            }
            
            .pass-length .details {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 10px;
            }
            
            .pass-length .title {
                color: #3b82f6;
                font-weight: bold;
            }
            
            .pass-length input[type="range"] {
                width: 100%;
                accent-color: #3b82f6; /* For range slider thumb and track */
                background-color: #333;
                border-radius: 5px;
                outline: none;
            }
            
            /* Password Settings */
            .pass-settings {
                margin-bottom: 20px;
            }
            
            .pass-settings .title {
                color: #3b82f6;
                font-weight: bold;
                margin-bottom: 10px;
                display: block;
            }
            
            .pass-settings .options {
                list-style-type: none;
                padding: 0;
                margin: 0;
            }
            
            .pass-settings .option {
                display: flex;
                align-items: center;
                margin-bottom: 10px;
            }
            
            .pass-settings .option input[type="checkbox"] {
                accent-color: #3b82f6;
                margin-right: 10px;
            }
            
            .pass-settings .option label {
                color: #f1f1f1;
            }
            
            /* Generate Button */
            .generate-btn {
                width: 100%;
                padding: 10px;
                background-color: #3b82f6;
                border: none;
                border-radius: 5px;
                color: #f1f1f1;
                font-weight: bold;
                cursor: pointer;
                transition: background-color 0.3s ease;
            }
            
            .generate-btn:hover {
                background-color: #2563eb; /* Darker blue on hover */
            }
            
            /* Credits (Optional) */
            .credits p {
                color: #777;
                text-align: center;
                font-size: 14px;
                margin-top: 20px;
            }

            .imgg{
                width: 25px;
            }
        </style>
    </head>
    <body>
        <div id="home" class="home-link"><i class="fas fa-home"></i> Home</div>
        <!-- <div id="click">click me</div> -->
        <div id="add-pass-success">Password added successfully!</div>
        <div id="main-container">
            <div class="password-form">
                <h2>Add Password</h2>
                <form id="password-form">
                    <div class="password-container">
                        <label for="password1">Website Name:</label>
                        <div class="password-input">
                            <input
                                type="text"
                                id="websiteToAdd"
                                name="website1"
                                required
                            />
                            <span class="toggle-password"></span>
                        </div>
                        <label for="password1">Email:</label>
                        <div class="password-input">
                            <input
                                type="email"
                                id="emailToAdd"
                                name="email1"
                                required
                            />
                            <span class="toggle-password"></span>
                        </div>
                        <label for="password1">Password:</label>
                        <div class="password-input">
                            <input
                                type="password"
                                id="passwordToAdd"
                                name="password1"
                                required
                            />
                            <span class="toggle-password"></span>
                        </div>
                    </div>
                    <div id="adding-password">Submit</div>
                </form>
            </div>
    
            <div>
                <section class="generate" id="generate">
                    <div class="background-image-container"></div>
                    <div class="container">
                        <div class="wrapper">
                            <div class="input-box">
                                <input type="text" disabled />
                                <span class="material-symbols-outlined"
                                    ><img class="imgg" src="https://www.svgrepo.com/show/525288/copy.svg" alt="copy"></span
                                >
                            </div>
                            <div class="pass-indicator"></div>
                            <div class="pass-length">
                                <div class="details">
                                    <label class="title">Password Length</label>
                                    <span></span>
                                </div>
                                <input
                                    type="range"
                                    min="1"
                                    max="30"
                                    value="15"
                                    step="1"
                                />
                            </div>
                            <div class="pass-settings">
                                <label class="title">Password Settings</label>
                                <ul class="options">
                                    <li class="option">
                                        <input type="checkbox" id="lowercase" checked />
                                        <label for="lowercase">Lowercase (a-z)</label>
                                    </li>
                                    <li class="option">
                                        <input type="checkbox" id="uppercase" />
                                        <label for="uppercase">Uppercase (A-Z)</label>
                                    </li>
                                    <li class="option">
                                        <input type="checkbox" id="numbers" />
                                        <label for="numbers">Numbers (0-9)</label>
                                    </li>
                                    <li class="option">
                                        <input type="checkbox" id="symbols" />
                                        <label for="symbols">Symbols (!-$^+)</label>
                                    </li>
                                    <li class="option">
                                        <input type="checkbox" id="exc-duplicate" />
                                        <label for="exc-duplicate"
                                            >Exclude Duplicate</label
                                        >
                                    </li>
                                    <li class="option">
                                        <input type="checkbox" id="spaces" />
                                        <label for="spaces">Include Spaces</label>
                                    </li>
                                </ul>
                            </div>
                            <button class="generate-btn">Generate Password</button>
                        </div>
                    </div>
                    <div class="credits">
                    <p>BY avinash </p>
                </div> 
                </section>
            </div>
        </div>

        <script>
            const lengthSlider = document.querySelector(".pass-length input"),
                options = document.querySelectorAll(".option input"),
                copyIcon = document.querySelector(".input-box span"),
                passwordInput = document.querySelector(".input-box input"),
                passIndicator = document.querySelector(".pass-indicator"),
                generateBtn = document.querySelector(".generate-btn");

            const characters = {
                // object of letters, numbers & symbols
                lowercase: "abcdefghijklmnopqrstuvwxyz",
                uppercase: "ABCDEFGHIJKLMNOPQRSTUVWXYZ",
                numbers: "0123456789",
                symbols: "^!$%&|[](){}:;.,*+-#@<>~",
            };

            const generatePassword = () => {
                let staticPassword = "",
                    randomPassword = "",
                    excludeDuplicate = false,
                    passLength = lengthSlider.value;

                options.forEach((option) => {
                    // looping through each option's checkbox
                    if (option.checked) {
                        // if checkbox is checked
                        // if checkbox id isn't exc-duplicate && spaces
                        if (
                            option.id !== "exc-duplicate" &&
                            option.id !== "spaces"
                        ) {
                            // adding particular key value from character object to staticPassword
                            staticPassword += characters[option.id];
                        } else if (option.id === "spaces") {
                            // if checkbox id is spaces
                            staticPassword += `  ${staticPassword}  `; // adding space at the beginning & end of staticPassword
                        } else {
                            // else pass true value to excludeDuplicate
                            excludeDuplicate = true;
                        }
                    }
                });

                for (let i = 0; i < passLength; i++) {
                    // getting random character from the static password
                    let randomChar =
                        staticPassword[
                            Math.floor(Math.random() * staticPassword.length)
                        ];
                    if (excludeDuplicate) {
                        // if excludeDuplicate is true
                        // if randomPassword doesn't contains the current random character or randomChar is equal
                        // to space " " then add random character to randomPassword else decrement i by -1
                        !randomPassword.includes(randomChar) ||
                        randomChar == " "
                            ? (randomPassword += randomChar)
                            : i--;
                    } else {
                        // else add random character to randomPassword
                        randomPassword += randomChar;
                    }
                }
                passwordInput.value = randomPassword; // passing randomPassword to passwordInput value
            };

            const upadatePassIndicator = () => {
                // if lengthSlider value is less than 8 then pass "weak" as passIndicator id else if lengthSlider
                // value is less than 16 then pass "medium" as id else pass "strong" as id
                passIndicator.id =
                    lengthSlider.value <= 8
                        ? "weak"
                        : lengthSlider.value <= 16
                        ? "medium"
                        : "strong";
            };

            const updateSlider = () => {
                // passing slider value as counter text
                document.querySelector(".pass-length span").innerText =
                    lengthSlider.value;
                generatePassword();
                upadatePassIndicator();
            };
            updateSlider();

            const copyPassword = () => {
                navigator.clipboard.writeText(passwordInput.value); // copying random password
                copyIcon.innerText = "check"; // changing copy icon to tick
                copyIcon.style.color = "#4285F4";
                setTimeout(() => {
                    // after 1500 ms, changing tick icon back to copy
                    copyIcon.innerText = "copy_all";
                    copyIcon.style.color = "#707070";
                }, 1500);
            };

            copyIcon.addEventListener("click", copyPassword);
            lengthSlider.addEventListener("input", updateSlider);
            generateBtn.addEventListener("click", generatePassword);

            // Get the button elements
            const freeButton = document.querySelector(".cta button");
            const generateButton = document.querySelector(".info .free");

            // Add click event listeners to the buttons
            freeButton.addEventListener("click", () => {
                // Scroll to the generate section
                document
                    .querySelector(".generate")
                    .scrollIntoView({ behavior: "smooth" });
            });

            generateButton.addEventListener("click", () => {
                // Scroll to the generate section
                document
                    .querySelector(".generate")
                    .scrollIntoView({ behavior: "smooth" });
            });
        </script>

        <!-- <script src="password-form.js"></script> -->
        <script type="module" src="../assets/addpasswordfirebase.js"></script>
    </body>
</html>
